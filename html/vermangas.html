<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Leer Capítulo - White Pearl Translation</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />
  <link rel="stylesheet" href="../styles/manga-reader.css" />
  <link rel="stylesheet" href="../styles/comentarios.css" />
  
  <style>
    /* Aquí se puede poner el CSS que te paso abajo, o lo cargas aparte */
  </style>
</head>

<body class="manga-reader">

  <!-- Contenedor principal con layout flex vertical -->
  <div class="page-wrapper">

    <!-- Contenedor principal del lector Cubari -->
    <div class="cubari-reader-wrapper">
      <!-- Barra de progreso -->
      <div class="reader-progress">
        <div class="reader-progress-bar" id="progress-bar"></div>
      </div>

      <!-- Información del capítulo -->
      <div class="reader-info" id="reader-info">
        <h5 id="chapter-title">Cargando capítulo...</h5>
        <p id="chapter-progress">0 / 0 páginas</p>
      </div>

      <!-- Botón para mostrar/ocultar controles -->
      <div class="toggle-controls" id="toggle-controls">
        <i class="bi bi-gear"></i>
      </div>

      <!-- Controles del lector -->
      <div class="reader-controls" id="reader-controls">
        <h6>Configuración del lector</h6>
        
        <div class="control-group">
          <label>Modo de lectura</label>
          <button class="control-button active" data-mode="vertical">Vertical</button>
          <button class="control-button" data-mode="horizontal">Horizontal</button>
          <button class="control-button" data-mode="webtoon">Webtoon</button>
        </div>
        
        <div class="control-group">
          <label>Ajuste de imagen</label>
          <button class="control-button active" data-fit="fit-width">Ajustar ancho</button>
          <button class="control-button" data-fit="fit-height">Ajustar alto</button>
          <button class="control-button" data-fit="original-size">Tamaño original</button>
        </div>
        
        <div class="control-group">
          <label>Espaciado entre páginas</label>
          <input type="range" class="control-slider" id="spacing-slider" min="0" max="50" value="10">
        </div>
      </div>

      <!-- Navegación flotante -->
      <div class="reader-navigation" id="reader-navigation">
        <button class="nav-button" id="nav-prev-chapter" title="Capítulo anterior">
          <i class="bi bi-skip-backward"></i>
        </button>
        <button class="nav-button" id="nav-prev-page" title="Página anterior">
          <i class="bi bi-chevron-left"></i>
        </button>
        <a class="nav-button" id="nav-back-manga" href="#" title="Volver al manga">
          <i class="bi bi-book"></i>
        </a>
        <button class="nav-button" id="nav-next-page" title="Página siguiente">
          <i class="bi bi-chevron-right"></i>
        </button>
        <button class="nav-button" id="nav-next-chapter" title="Capítulo siguiente">
          <i class="bi bi-skip-forward"></i>
        </button>
      </div>

    <div class="reader-container vertical" id="reader-container">
  <!-- Aquí van las imágenes dinámicamente -->
  
  <div class="reader-click-overlay" id="click-overlay">
    <div class="click-zone previous" id="click-prev"></div>
    <div class="click-zone menu" id="click-menu"></div>
    <div class="click-zone next" id="click-next"></div>
  </div>
</div>


      <!-- Loading indicator -->
      <div class="reader-loading" id="reader-loading" style="display: none;">
        <div class="spinner"></div>
        <span>Cargando capítulo...</span>
      </div>
    </div>

    <!-- Contenedor separado para comentarios -->
    <div class="comments-wrapper" id="comments-section">
      <div class="row justify-content-center">
        <div class="col-12 col-md-11 col-lg-9 comment-section-custom">

          <div class="comment-header-custom d-flex justify-content-between align-items-center mb-2">
            <div class="comment-count-custom">0 Comentarios</div>
            <button id="btn-iniciar-sesion" class="btn btn-primary btn-sm">Iniciar sesión para comentar</button>
            <button id="btn-logout" class="btn btn-danger btn-sm" style="display:none;">Cerrar sesión</button>
          </div>

          <div id="comment-form" class="comment-input-area-custom mb-3 d-flex gap-3 align-items-start" style="display:none;">
            <div class="user-avatar-custom" id="user-avatar">U</div>
            <textarea id="input-comentario" class="form-control comment-textarea-custom" placeholder="Escribe tu comentario..." rows="3"></textarea>
            <button id="btn-publicar-comentario" class="btn btn-success align-self-start">Publicar</button>
          </div>

          <div id="lista-comentarios" class="mt-3"></div>

        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="footer-redes py-4 mt-4">
    <div class="container text-center">
      <h5 class="mb-3 text-light">Síguenos en nuestras redes</h5>
      <div class="d-flex justify-content-center gap-4">
        <a href="https://web.facebook.com/profile.php?id=61556342730848" target="_blank" class="text-decoration-none text-light fs-3"><i class="bi bi-facebook"></i></a>
        <a href="https://discord.com/invite/sJJZkrkXz6" target="_blank" class="text-decoration-none text-light fs-3"><i class="bi bi-discord"></i></a>
      </div>
    </div>
  </footer>

  <!-- Scripts -->
  <script type="module" src="../java/main.js"></script>
  <script type="module" src="../java/cubari-reader.js"></script>
  <script type="module" src="../java/comentarios.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
